using Simulation.Core.Actions;
using Simulation.Core.Events;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Simulation.Core.Primitives
{
    /// <summary>
    /// Интерфейс ISchedulable является базовым для классов объектов, 
    /// для которых возможны манипуляции с уведомлениями о событиях 
    /// (удаление, перемещение и т. п.). Производный от IActivatable
    /// </summary>
    public interface ISchedulable : IActivatable
    {
        /// <summary>
        /// Указывает, находится ли процесс в пассивном или завершенном состоянии
        /// </summary>
        bool Idle
        {
            get;
        }

        /// <summary>
        /// Уведомление о событии, связанное с процессом
        /// </summary>
        SchedulableEventNotice Event
        {
            get;
            set;
        }

        /// <summary>
        /// Переводит процесс в пассивное состояние, удаляя его 
        /// запись уведомления о событии из календаря
        /// <para>Если процесс является текущим, управление передается 
        /// следующему по порядку процессу</para>
        /// </summary>
        ISimulationAction Passivate();

        /// <summary>
        /// Перемещает запись уведомления об активации процесса, 
        /// в том числе приостановленного, непосредственно после текущего.
        /// <para>Если процесс находится в активном состоянии (то есть, является текущим), 
        /// ничего не делает</para>
        /// </summary>
        ISimulationAction Reactivate();

        /// <summary>
        /// Перемещает запись уведомления об активации процесса 
        /// непосредственно после записи указанного процесса
        /// <para>Если процесс находится в пассивном состоянии, создает 
        /// новую запись уведомления</para>
        /// <para>Если процесс является активным, он приостанавливается</para>
        /// <para>Если процесс-параметр находится в пассивном состоянии, 
        /// порождается исключение</para>
        /// </summary>
        /// <param name="act">Процесс, перед которым следует активировать данный</param>
        ISimulationAction ReactivateAfter(ISchedulable act);

        /// <summary>
        /// Перемещает запись уведомления об активации процесса непосредственно 
        /// перед записью указанного процесса
        /// <para>Если процесс находится в пассивном состоянии, создает 
        /// новую запись уведомления</para>
        /// <para>Если процесс является активным, он приостанавливается</para>
        /// <para>Если процесс-параметр находится в пассивном состоянии, 
        /// порождается исключение</para>
        /// </summary>
        /// <param name="act">Процесс, перед которым следует активировать данный</param>
        ISimulationAction ReactivateBefore(ISchedulable act);

        /// <summary>
        /// Перемещает запись уведомления об активации процесса на указанное время
        /// <para>Если процесс находится в пассивном состоянии, создает 
        /// новую запись уведомления</para>
        /// <para>Если процесс является активным, он приостанавливается</para>
        /// </summary>
        /// <param name="t">Имитационное время активации процесса</param>
        ISimulationAction ReactivateAt(double t);

        /// <summary>
        /// Перемещает запись уведомления об активации процесса непосредственно 
        /// перед записью указанного процесса
        /// <para>Если процесс находится в пассивном состоянии, создает новую 
        /// запись уведомления</para>
        /// <para>Если процесс является активным, он приостанавливается</para>
        /// <para>Если процесс-параметр находится в пассивном состоянии, порождается 
        /// исключение</para>
        /// </summary>
        /// <param name="dt">Процесс, перед которым следует активировать данный</param>
        ISimulationAction ReactivateDelay(double dt);

        /// <summary>
        /// Перемещает запись уведомления об активации процесса на 
        /// указанное время с приоритетом.
        /// <para>Если процесс находится в пассивном состоянии, создает 
        /// новую запись уведомления</para>
        /// <para>Если процесс является активным, он приостанавливается</para>
        /// </summary>
        /// <param name="t">Имитационное время активации процесса</param>
        ISimulationAction ReactivatePriorAt(double t);

        /// <summary>
        /// Перемещает запись уведомления об активации процесса с указанной 
        /// задержкой времени относительно текущего процесса с приоритетом.
        /// <para>Если процесс находится в пассивном состоянии, создает 
        /// новую запись уведомления</para>
        /// <para>Если процесс является активным, он приостанавливается</para>
        /// </summary>
        /// <param name="dt">Имитационное время активации процесса</param>
        ISimulationAction ReactivatePriorDelay(double dt);

        /// <summary>
        /// Постановка процесса в очередь и перевод его в режим ожидания
        /// </summary>
        /// <param name="l">Очередь ожидания</param>
        ISimulationAction Wait(SimulationList l);
    }
}
